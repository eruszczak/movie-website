{% load static %}
{% with url_name=request.resolver_match.url_name %}
    <div class="ui grid">
        <div class="computer tablet only row">
            <div class="ui secondary top attached menu">
                <a href="{% url 'home' %}" class="header item">Movie Website</a>
                <a href="{% url 'home' %}" class="item{% if url_name == 'home' %} active{% endif %}"><i class="home icon"></i> Home</a>
                <a href="{% url 'title-list' %}" class="item{% if url_name == 'title-list' and not owner_looks_on_his_ratings %} active{% endif %}"><i class="list layout icon"></i> Explore</a>
                <a href="{% url 'user-list' %}" class="item{% if url_name == 'user-list' %} active{% endif %}"><i class="user icon"></i> Users</a>
                <div class="right menu item">
                    {% if request.user.is_authenticated %}
                        <div class="ui dropdown item">
                            <strong>My account</strong>
                            <i class="dropdown icon"></i>
                            <div class="menu">
                                <a class="item{% if url_name == 'user-detail' and user.username == request.user.username %} active{% endif %}"
                                href="{% url 'user-detail' request.user.username %}"><i class="user icon"></i>My Account</a>
                                <a href="{{ request.user.edit_url }}"
                                class="item{% if url_name == 'user-edit' %} active{% endif %}"><i class="setting icon"></i>Settings</a>
                                <div class="divider"></div>
                                <a class="item{% if url_name == 'title-list' and owner_looks_on_his_ratings %} active{% endif %}"
                                href="{{ request.user.ratings_url }}"><i class="star icon"></i>My Ratings</a>
                                <a class="item{% if url_name == 'favourite-list' and user.username == request.user.username %} active{% endif %}"
                                href="{{ request.user.favourite_url }}"><i class="list icon"></i>Favourites</a>
                                <a class="item{% if url_name == 'watchlist-list' and user.username == request.user.username %} active{% endif %}"
                                href="{{ request.user.watchlist_url }}"><i class="bookmark icon"></i>Watchlist</a>
                                <div class="divider"></div>
                                <a href="{% url 'logout' %}?next={{ request.path }}" class="item"><i class="sign out icon"></i>Logout</a>
                            </div>
                        </div>
                    {% else %}
                        <div class="right menu">
                            <a href="{% url 'login' %}?next={{ request.path }}" class="item{% if url_name == 'login' %} active{% endif %}"><i
                                    class="sign in icon"></i>Login</a>
                            <a class="ui primary button" href="{% url 'register' %}" class="item{% if url_name == 'register' %} active{% endif %}"><i
                                    class="sign out icon"></i>Sign up</a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="mobile only row">
            <div class="ui top attached menu">
                <a href="{% url 'home' %}" class="header item">Movie Website</a>
                <div class="right menu open">
                    <a class="menu item"><i class="sidebar icon"></i></a>
                </div>
            </div>
            <div class="ui vertical menu" style="width:100%;display:none">
                <a href="{% url 'home' %}" class="item{% if url_name == 'home' %} active{% endif %}"><i class="home icon"></i> Home</a>
                <a href="{% url 'title-list' %}" class="item{% if url_name == 'title-list' and not owner_looks_on_his_ratings %} active{% endif %}"><i class="list layout icon"></i> Explore</a>
                <a href="{% url 'user-list' %}" class="item{% if url_name == 'user-list' %} active{% endif %}"><i class="user icon"></i> Users</a>
                {% if request.user.is_authenticated %}
                    <a class="item{% if url_name == 'user-detail' and user.username == request.user.username %} active{% endif %}"
                    href="{% url 'user-detail' request.user.username %}"><i class="user icon"></i>My Account</a>
                    <a href="{{ request.user.edit_url }}"
                    class="item{% if url_name == 'user-edit' %} active{% endif %}"><i class="setting icon"></i>Settings</a>
                    <a class="item{% if url_name == 'title-list' and owner_looks_on_his_ratings %} active{% endif %}"
                    href="{{ request.user.ratings_url }}"><i class="star icon"></i>My Ratings</a>
                    <a class="item{% if url_name == 'favourite-list' and user.username == request.user.username %} active{% endif %}"
                    href="{{ request.user.favourite_url }}"><i class="list icon"></i>Favourites</a>
                    <a class="item{% if url_name == 'watchlist-list' and user.username == request.user.username %} active{% endif %}"
                    href="{{ request.user.watchlist_url }}"><i class="bookmark icon"></i>Watchlist</a>
                    <a href="{% url 'logout' %}?next={{ request.path }}" class="item"><i class="sign out icon"></i>Logout</a>
                {% else %}
                    <a href="{% url 'login' %}?next={{ request.path }}" class="item{% if url_name == 'login' %} active{% endif %}"><i
                            class="sign in icon"></i>Login</a>
                    <a href="{% url 'register' %}" class="item{% if url_name == 'register' %} active{% endif %}"><i
                            class="sign out icon"></i>Sign up</a>
                {% endif %}
            </div>
        </div>
    </div>
{% endwith %}