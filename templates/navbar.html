{% load staticfiles %}
<nav class="navbar navbar-default navbar-fixed-top">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
		</div>
		<div id="navbar" class="navbar-collapse collapse">
			<ul class="nav navbar-nav">
				<li class="/"><a href="{% url 'home' %}"><span class="glyphicon glyphicon-home" aria-hidden="true"></span> home</a></li>
				<li><a href="{% url 'explore' %}"><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span> explore</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">more <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="{% url 'groupby_year' %}">all years</a></li>
                        <li><a href="{% url 'groupby_genre' %}">all genres</a></li>
                        <li><a href="{% url 'groupby_director' %}">all directors</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">{% if request.user.is_authenticated %}{{ request.user.username }}{% else %}users{% endif %} <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                    {% if request.user.is_authenticated %}
                        <li><a href="{% url 'user_list' %}"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> users</a></li>
                        <li><a href="{{ request.user.userprofile.get_absolute_url }}"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> your profile</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="{{ request.user.userprofile.watchlist_url }}"><span class="glyphicon glyphicon-list" aria-hidden="true"></span> watchlist</a></li>
                        <li><a href="{{ request.user.userprofile.favourite_url }}"><span class="glyphicon glyphicon-heart-empty" aria-hidden="true"></span> favourites</a></li>
                        <li><a href="{{ request.user.userprofile.recommend_url }}"><span class="glyphicon glyphicon-hand-right" aria-hidden="true"></span> recommend</a></li>
                        <li role="separator" class="divider"></li>
                    {% else %}
                        <li><a href="{% url 'user_list' %}">users</a></li>
                    {% endif %}
                    {% if not request.user.is_authenticated %}
                        <li><a href="{% url 'login' %}">login</a></li>
                        <li><a href="{% url 'register' %}">register</a></li>
                    {% else %}
                        {% if request.user.userprofile.picture %}
                        <li class="text-center">
                            <a href="{{ request.user.userprofile.get_absolute_url }}">
                                <img id="avatar" class="img-responsive img-thumbnail" src="{{ request.user.userprofile.picture.url }}" alt="..." style="width: 100px">
                            </a>
                        </li>
                        <li role="separator" class="divider"></li>
                        {% endif %}
                        <li class="text-center"><a href="{% url 'logout' %}"><span class="glyphicon glyphicon-off" aria-hidden="true"></span> logout</a></li>
                    {% endif %}
                    </ul>
                </li>
			</ul>
		</div>
	</div>
</nav>